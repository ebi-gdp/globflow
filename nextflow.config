params {
    // mandatory params
    config_secrets = null
    input = null

    // optional params
    config_path = "$baseDir/assets/application-dev.properties"
    outdir = "results"
    secret_key = "$baseDir/assets/NO_FILE"
}

docker {
    enabled = true
}

process {
    errorStrategy = { sleep(Math.pow(2, task.attempt) * 200 as long) ? 'retry' : 'finish' }
    maxRetries    = 3
    maxErrors     = '-1'

    cpus = 1
    memory = 2.GB
    time = 6.h
    container = "ghcr.io/ebi-gdp/globus-file-handler-cli:1.0.0"
}

nextflow.enable.strict = true

manifest {
    name            = 'ebi-gdp/globflow'
    author          = 'Benjamin Wingfield'
    defaultBranch   = 'main'
    homePage        = 'https://github.com/ebi-gdp/globflow'
    description     = 'Download files from Globus over HTTPS, with optional decryption on the fly'
    mainScript      = 'main.nf'
    nextflowVersion = '>=23.10.1'
    version         = '0.1.0'
}